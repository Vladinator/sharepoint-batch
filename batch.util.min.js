/*!
 * SharePointBatch
 * Copyright 2016 Alex Pedersen
 * Licensed under the MIT license
 * https://github.com/Vladinator89/sharepoint-batch
 */
!function(){"use strict";function b(c){function e(){return new b(c)}function f(){for(var b=0,c=0;c<arguments.length;c++){var e=arguments[c];if(e instanceof a)this.jobs.push(e);else if(a.prototype.isObject(e,!0)){var f=d.append(e);f<0&&(d=d.spawn(),d.append(e))}b++}return b}function g(){for(var a=[],b=0;b<arguments.length;b++){var c=arguments[b],d=this.jobs.indexOf(c);d>-1&&a.push(this.jobs.splice(d,1))}return!!a.length&&a}function h(b){function f(){function h(a,b,c){k(c)}function i(a,b,c){k(c)}function j(a,h,i){"function"==typeof b.progress&&b.progress.call(c,g,d,e),f.call(c)}function k(b){if(a.prototype.isArray(b))for(var c=0;c<b.length;c++)e.push(b[c]);else e.push(b)}var g=d.shift();g?g.send({done:h,fail:i,always:j}):("function"==typeof b.done&&b.done.call(c,d,e),"function"==typeof b.always&&b.always.call(c,d,e),"function"==typeof b.after&&b.after.call(c,d,e))}b=a.prototype.extend({},b);var c=this,d=c.jobs,e=[];"function"==typeof b.before&&b.before.call(c,d,e),f()}a.prototype.extend(this,{options:a.prototype.extend({url:"",digest:""},c),jobs:[],spawn:e,append:f,remove:g,send:h});var d=new window.SharePointBatch(c);this.jobs.push(d)}var a=window.SharePointBatch;window.SharePointBatchUtil=b}();
