/*!
 * SharePointBatch
 * Copyright 2016 Alex Pedersen
 * Licensed under the MIT license
 * https://github.com/Vladinator89/sharepoint-batch
 */
!function(){"use strict";var u=window.SharePointBatch;window.SharePointBatchUtil=function t(n){u.prototype.extend(this,{options:u.prototype.extend({url:"",digest:""},n),jobs:[],spawn:function(){return new t(n)},append:function(){for(var t=-1,n=0;n<arguments.length;n++){var o=arguments[n];if(o instanceof u)this.jobs.push(o),t++;else if(u.prototype.isObject(o,!0)){var e=s.append(o);e<0&&((s=s.spawn()).append(o),this.jobs.push(s)),t++}}return t},remove:function(){for(var t=[],n=0;n<arguments.length;n++){var o=arguments[n],e=this.jobs.indexOf(o);-1<e&&t.push(this.jobs.splice(e,1));for(var s=0;s<this.jobs.length;s++){var i=this.jobs[s];u.prototype.isObject(i.jobs,!0)&&-1<(e=i.jobs.indexOf(o))&&t.push(i.jobs.splice(e,1))}}return!!t.length&&t},send:function(r){r=u.prototype.extend({},r);var a=this,p=a.jobs,f=[],c=0;"function"==typeof r.before&&r.before.call(a,p,f),function e(){var s=p[c];function t(t,n,o){i(o)}function n(t,n,o){i(o)}function o(t,n,o){"function"==typeof r.progress&&r.progress.call(a,s,p,f),c++,e.call(a)}function i(t){if(u.prototype.isArray(t))for(var n=0;n<t.length;n++)f.push(t[n]);else f.push(t)}s?s.send({done:t,fail:n,always:o}):("function"==typeof r.done&&r.done.call(a,p,f),"function"==typeof r.always&&r.always.call(a,p,f),"function"==typeof r.after&&r.after.call(a,p,f))}()}});var s=new window.SharePointBatch(n);this.jobs.push(s)}}();